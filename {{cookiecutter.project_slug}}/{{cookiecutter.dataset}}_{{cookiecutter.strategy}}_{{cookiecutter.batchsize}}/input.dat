{%- set _dataset_size={"AA": "44004", "OE":"64710", "QM9":"133814"} -%}
{%- set _mbtrs={"AA": "mbtr_k2.npz", "OE":"mbtr_0.02.npz", "QM9":"mbtr_0.1.npz"} -%}
{%- set _sets={"run1": "1234", "run2":"2345", "run3":"3456", "run4":"4567", "run5":"5678"} -%}
{%- set _fn_name={"A": "rnd2", "B": "high2", "C": "cluster", "D": "high_and_cluster", "E": "high_and_cluster_highest", "F": "high_and_random", "G": "cluster_highest", "H": "mean_pred", "I": "mean_pred_with_uncertainty", "J": "most_uncertain_in_range"} -%}
{%- set batchsize_to_num = {"10":0.01, "100":0.1, "1k":1, "2k":2, "4k":4, "8k":8} -%}
{%- set target_low_defaults = {"AA":-8.5, "OE":-5.2, "QM9":-5.55} -%}
{%- set target_high_defaults = {"AA":0, "OE":0, "QM9":0} -%}

{%- set batchsize = batchsize_to_num[cookiecutter.batchsize] -%}
{%- if cookiecutter.batchsize == "EXP" -%}
{%- set batches=[1,2,4,8,16] -%}
{%- else -%}
{%- set number_of_batches = (16/batchsize)|int -%}
{%- set batches=[batchsize]*number_of_batches -%}
{%- endif -%}
#condtidion
fn_name                 {{_fn_name[cookiecutter.strategy]}}
out_name                {{cookiecutter.dataset}}-{{cookiecutter.strategy}}-{{cookiecutter.batchsize}}
dataset                 {{cookiecutter.dataset}}
dataset_size            {{_dataset_size[cookiecutter.dataset]}}
test_set_size           10000
rnd_size                2.0
K_high                  100
random_seed             {random_seed}

#preprocess
mbtr_red                False
preprocess               none

#kernel
kernel_type             constRBF
length                  700
const                   20
bound                   1e2
n_opt                   2
alpha                   0.05
normalize_y             False
{% if cookiecutter.range_low != "none" -%}
range_low              {{target_low_defaults[cookiecutter.dataset]}}
{% endif -%}
{% if cookiecutter.range_high != "none" -%}
range_high              {{target_high_defaults[cookiecutter.dataset]}}
{% endif -%}


#flag
save_load_flag          save
save_load_split_flag    False
restart_flag            False

#trainsize
num_itr    {{ batches|length}}
pre_idxs_0    1000
{%- for batch in batches %}
pre_idxs_{{loop.index}}    {{(batch*1000)|int}}
{%- endfor %}

#path
mbtr_path              {{cookiecutter.data_path}}/{{cookiecutter.dataset}}/{{_mbtrs[cookiecutter.dataset]}}
json_path              {{cookiecutter.data_path}}/{{cookiecutter.dataset}}/HOMO.txt
loadidxs_path          {{cookiecutter.data_path}}/{{cookiecutter.dataset}}_derived/10K_dataset_load_high/10Kloadhigh2_0_idxs.npz
loadsplitidxs_path     {{cookiecutter.data_path}}/{{cookiecutter.dataset}}_derived/10K_dataset_load_high/10Kdataset_dataset_split_idxs.npz
